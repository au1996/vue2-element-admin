(self.webpackChunkvue2_element_admin=self.webpackChunkvue2_element_admin||[]).push([[9621],{9057:function(e,t,r){var n=r(7860);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),(0,r(5346).Z)("33f62877",n,!1,{})},8892:function(e,t,r){var n=r(3548);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),(0,r(5346).Z)("5ade0479",n,!1,{})},226:function(e,t,r){var n=r(6230);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),(0,r(5346).Z)("1336be09",n,!1,{})},8554:function(e,t,r){var n=r(1583);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),(0,r(5346).Z)("68bcf3e6",n,!1,{})},9396:function(e,t,r){var n=r(7065);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),(0,r(5346).Z)("31bfd9b0",n,!1,{})},7860:function(e,t,r){"use strict";r.r(t)},3548:function(e,t,r){"use strict";r.r(t)},6230:function(e,t,r){"use strict";r.r(t)},1583:function(e,t,r){"use strict";r.r(t)},7065:function(e,t,r){"use strict";r.r(t)},9621:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return z}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-wrapper",class:e.classObj},["mobile"===e.device&&e.sidebar.opened?r("div",{staticClass:"drawer-bg",on:{click:e.handleClickOutside}}):e._e(),e._v(" "),r("Sidebar",{staticClass:"sidebar-container scrollStyle"}),e._v(" "),r("div",{staticClass:"main-container"},[r("Navbar"),e._v(" "),r("TagsView"),e._v(" "),r("AppMain")],1)],1)};n._withStripped=!0;var i=r(629),o=r(8858),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar-container"},[n("div",{staticClass:"logo",on:{click:function(t){return e.$router.push("/")}}},[n("img",{staticClass:"logoImg",attrs:{src:r(7518),alt:"logo"}}),e._v(" "),n("transition",{attrs:{name:"el-zoom-in-center"}},[n("h1",{directives:[{name:"show",rawName:"v-show",value:e.sidebar.opened,expression:"sidebar.opened"}],staticClass:"logoText"},[e._v("Vue Element Admin")])])],1),e._v(" "),n("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[n("el-menu",{attrs:{router:!0,"default-active":e.$route.path,collapse:e.isCollapse,"show-timeout":200,"unique-opened":"","text-color":"#fff","background-color":"#4a5a74","active-text-color":"#409EFF"}},e._l(e.routers,(function(e){return n("SidebarItem",{key:e.path,attrs:{index:e.path,item:e}})})),1)],1)],1)};s._withStripped=!0;var a=r(9851),l=r(5211),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.item.meta&&!e.item.hide?r("div",[r("div",{staticClass:"menu-wrapper"},[e.item.children?r("el-submenu",{attrs:{index:e.item.path}},[r("template",{slot:"title"},[e.item.meta.icon?r("svg-icon",{attrs:{"icon-class":e.item.meta.icon}}):e._e(),e._v(" "),r("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.meta.title))])],1),e._v(" "),e._l(e.item.children,(function(t){return[t.children&&t.children.length>0?r("sidebar-item",{key:t.path,staticClass:"nest-menu",attrs:{index:t.path,"is-nest":!0,item:t}}):r("el-menu-item",{key:t.path,attrs:{index:t.path}},[t.meta.icon?r("svg-icon",{attrs:{"icon-class":t.meta.icon}}):e._e(),e._v(" "),r("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.meta.title))])],1)]}))],2):r("el-menu-item",{class:{"submenu-title-noDropdown":!e.isNest},attrs:{index:e.item.path}},[e.item.meta.icon?r("svg-icon",{attrs:{"icon-class":e.item.meta.icon}}):e._e(),e._v(" "),r("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.meta.title))])],1)],1)]):e._e()};c._withStripped=!0;var u=r(6470),f=r.n(u),d={name:"SidebarItem",props:{item:{type:Object,required:!0},isNest:{type:Boolean,default:!1},basePath:{type:String,default:""}},data:function(){return{onlyOneChild:null}},methods:{hasOneShowingChild:function(e){var t=this;return 1===e.filter((function(e){return t.onlyOneChild=e,!0})).length},resolvePath:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f().resolve.apply(f(),[this.basePath].concat(t))}}},p=r(1900),h=(0,p.Z)(d,c,[],!1,null,"2d2bbdc2",null);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}h.options.__file="src/layout/components/Sidebar/SidebarItem.vue";var v={components:{SidebarItem:h.exports},data:function(){return{roles:"",routers:[]}},computed:{sidebar:function(){return this.$store.state.app.sidebar},isCollapse:function(){return!this.sidebar.opened}},mounted:function(){this.routers=this.filterRoutes()},methods:{filterRoutes:function(){this.roles=(0,l.F3)();var e=[];a.WC.forEach((function(t){var r;"/"===t.path&&e.push.apply(e,function(e){if(Array.isArray(e))return m(e)}(r=t.children)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}));for(var t=0;t<e.length;t++)e[t].meta&&e[t].meta.roles&&!e[t].meta.roles.includes(this.roles)&&(e.splice(t,1),t--);return this.filterChildrens(e),e},filterChildrens:function(e){var t=this,r=[];e.forEach((function(e){(e.meta&&!e.meta.roles||e.meta&&e.meta.roles&&e.meta.roles.includes(t.roles))&&(r.push(e),e.children&&t.filterChildrens(e.children))})),e.length=0,e.push.apply(e,r)}}},b=(r(9057),(0,p.Z)(v,s,[],!1,null,"33ec43fc",null));b.options.__file="src/layout/components/Sidebar/index.vue";var g=b.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tags-view-container",attrs:{id:"tags-view-container"}},[r("ScrollPane",{ref:"scrollPane",staticClass:"tags-view-wrapper",on:{scroll:e.handleScroll}},e._l(e.visitedViews,(function(t){return r("router-link",{key:t.path,staticClass:"tags-view-item",class:e.isActive(t)?"active":"",attrs:{to:{path:t.path,query:t.query,fullPath:t.fullPath}},on:{mouseup:function(r){if("button"in r&&1!==r.button)return null;!e.isAffix(t)&&e.closeSelectedTag(t)}},nativeOn:{contextmenu:function(r){return r.preventDefault(),e.openMenu(t,r)}}},[e._v("\n      "+e._s(t.title)+"\n      "),e.isAffix(t)?e._e():r("span",{staticClass:"el-icon-close",on:{click:function(r){return r.preventDefault(),r.stopPropagation(),e.closeSelectedTag(t)}}})])})),1),e._v(" "),r("ul",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"contextmenu",style:{left:e.left+"px",top:e.top+"px"}},[e.isAffix(e.selectedTag)?e._e():r("li",{on:{click:function(t){return e.closeSelectedTag(e.selectedTag)}}},[e._v("Close")]),e._v(" "),r("li",{on:{click:e.closeOthersTags}},[e._v("Close Others")]),e._v(" "),r("li",{on:{click:function(t){return e.closeAllTags(e.selectedTag)}}},[e._v("Close All")])])],1)};y._withStripped=!0;var w=function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-scrollbar",{ref:"scrollContainer",staticClass:"scroll-container",attrs:{vertical:!1},nativeOn:{wheel:function(t){return t.preventDefault(),e.handleScroll(t)}}},[e._t("default")],2)};function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}w._withStripped=!0;var S={name:"ScrollPane",data:function(){return{left:0}},computed:{scrollWrapper:function(){return this.$refs.scrollContainer.$refs.wrap}},mounted:function(){this.scrollWrapper.addEventListener("scroll",this.emitScroll,!0)},beforeDestroy:function(){this.scrollWrapper.removeEventListener("scroll",this.emitScroll)},methods:{handleScroll:function(e){var t=e.wheelDelta||40*-e.deltaY,r=this.scrollWrapper;r.scrollLeft=r.scrollLeft+t/4},emitScroll:function(){this.$emit("scroll")},moveToTarget:function(e){var t,r=this.$refs.scrollContainer.$el.offsetWidth,n=this.scrollWrapper,i=document.getElementsByClassName("tags-view-item"),o=null,s=null;if(i.length>0&&(o=i[0],s=i[i.length-1]),o===e)n.scrollLeft=0;else if(s===e)n.scrollLeft=n.scrollWidth-r;else{var a=(t=i,function(e){if(Array.isArray(e))return _(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).findIndex((function(t){return t===e})),l=i[a-1],c=i[a+1],u=c.offsetLeft+c.offsetWidth+4,f=l.offsetLeft-4;u>n.scrollLeft+r?n.scrollLeft=u-r:f<n.scrollLeft&&(n.scrollLeft=f)}}}},O=(r(8892),(0,p.Z)(S,w,[],!1,null,"be6b7bae",null));function A(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}O.options.__file="src/layout/components/TagsView/ScrollPane.vue";var P={components:{ScrollPane:O.exports},data:function(){return{visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}},computed:{visitedViews:function(){return this.$store.state.tagsView.visitedViews},routes:function(){return this.$store.state.permission.routes}},watch:{$route:function(e){this.addTags(),this.moveToCurrentTag(e)},visible:function(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted:function(){this.initTags(),this.addTags()},methods:{isActive:function(e){return e.path===this.$route.path},isAffix:function(e){return e.meta&&e.meta.affix},filterAffixTags:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=[];return e.forEach((function(e){if(e.meta&&e.meta.affix){var i=f().resolve(r,e.path);n.push({fullPath:i,path:i,name:e.name,meta:x({},e.meta)})}if(e.children){var o=t.filterAffixTags(e.children,e.path);o.length>=1&&(n=[].concat(A(n),A(o)))}})),n},initTags:function(){var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=T(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}(this.affixTags=this.filterAffixTags(this.routes));try{for(t.s();!(e=t.n()).done;){var r=e.value;r.name&&this.$store.dispatch("tagsView/addVisitedView",r)}}catch(e){t.e(e)}finally{t.f()}},addTags:function(){return this.$route.name&&this.$store.dispatch("tagsView/addView",this.$route),!1},moveToCurrentTag:function(e){var t=this;this.$nextTick((function(){for(var r=t.visitedViews,n=document.getElementsByClassName("tags-view-item"),i=0,o=r.length;i<o;i++)if(r[i].path===e.path){t.$refs.scrollPane.moveToTarget(n[i]),r[i].fullPath!==t.$route.fullPath&&t.$store.dispatch("tagsView/updateVisitedView",t.$route);break}}))},closeSelectedTag:function(e){var t=this;this.$store.dispatch("tagsView/delView",e).then((function(r){var n=r.visitedViews;t.isActive(e)&&t.toLastView(n)}))},closeOthersTags:function(){var e=this;this.$router.push(this.selectedTag),this.$store.dispatch("tagsView/delOthersViews",this.selectedTag).then((function(){e.moveToCurrentTag(e.selectedTag)}))},closeAllTags:function(e){var t=this;this.$store.dispatch("tagsView/delAllViews").then((function(r){var n=r.visitedViews;t.affixTags.some((function(t){return t.path===e.path}))||t.toLastView(n)}))},toLastView:function(e){var t=e.slice(-1)[0];t?this.$router.push(t.fullPath):this.$router.push("/")},openMenu:function(e,t){var r=this.$el.getBoundingClientRect().left,n=this.$el.offsetWidth-105,i=t.clientX-r+15;this.left=i>n?n:i,this.top=t.clientY,this.visible=!0,this.selectedTag=e},closeMenu:function(){this.visible=!1},handleScroll:function(){this.closeMenu()}}},V=(r(226),r(8554),(0,p.Z)(P,y,[],!1,null,"fac8ca64",null));V.options.__file="src/layout/components/TagsView/index.vue";var E=V.exports,k=r(4944),L=r(4558),M=document.body,D={watch:{$route:function(e){"mobile"===this.device&&this.sidebar.opened&&L.Z.dispatch("app/closeSideBar",{withoutAnimation:!1})}},beforeMount:function(){window.addEventListener("resize",this.$_resizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.$_resizeHandler)},mounted:function(){this.$_isMobile()&&(L.Z.dispatch("app/toggleDevice","mobile"),L.Z.dispatch("app/closeSideBar",{withoutAnimation:!0}))},methods:{$_isMobile:function(){return M.getBoundingClientRect().width-1<992},$_resizeHandler:function(){if(!document.hidden){var e=this.$_isMobile();L.Z.dispatch("app/toggleDevice",e?"mobile":"desktop"),e&&L.Z.dispatch("app/closeSideBar",{withoutAnimation:!0})}}}};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B={name:"Layout",components:{Navbar:o.Z,Sidebar:g,AppMain:k.Z,TagsView:E},mixins:[D],computed:Z(Z({},(0,i.rn)({sidebar:function(e){return e.app.sidebar},device:function(e){return e.app.device}})),{},{classObj:function(){return{hideSidebar:!this.sidebar.opened,openSidebar:this.sidebar.opened,withoutAnimation:this.sidebar.withoutAnimation,mobile:"mobile"===this.device}}}),methods:{handleClickOutside:function(){this.$store.dispatch("app/closeSideBar",{withoutAnimation:!1})}}},N=(r(9396),(0,p.Z)(B,n,[],!1,null,"13877386",null));N.options.__file="src/layout/index.vue";var z=N.exports}}]);