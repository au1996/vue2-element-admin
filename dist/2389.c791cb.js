(self.webpackChunkvue2_element_admin=self.webpackChunkvue2_element_admin||[]).push([[2389],{3804:function(e,s,t){var r=t(4144);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals),(0,t(5346).Z)("15384c51",r,!1,{})},4144:function(e,s,t){"use strict";t.r(s)},2389:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"login-wrap"},[t("div",{staticClass:"login-content"},[t("div",{staticClass:"login-title"},[e._v("系统登录")]),e._v(" "),t("el-form",{ref:"loginRef",staticClass:"login-form",attrs:{model:e.param,rules:e.rules,"status-icon":""}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{placeholder:"用户名"},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("i",{staticClass:"el-icon-s-custom"})]},proxy:!0}]),model:{value:e.param.username,callback:function(s){e.$set(e.param,"username",s)},expression:"param.username"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{placeholder:"密码",type:e.passwordType},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.submitForm(s)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("i",{directives:[{name:"show",rawName:"v-show",value:e.passwordLock,expression:"passwordLock"}],staticClass:"el-icon-lock",on:{click:e.switchPass}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.passwordLock,expression:"!passwordLock"}],staticClass:"el-icon-unlock",on:{click:e.switchPass}})]},proxy:!0}]),model:{value:e.param.password,callback:function(s){e.$set(e.param,"password",s)},expression:"param.password"}})],1),e._v(" "),t("div",{staticClass:"login-btn"},[t("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.submitForm}},[e._v("登录")])],1),e._v(" "),t("p",{staticClass:"login-tips"},[e._v("用户名: admin 密码: 123")]),e._v(" "),t("p",{staticClass:"login-tips"},[e._v("用户名: editor 密码: 456")])],1)],1)])};r._withStripped=!0;var a=t(5211),o=t(9669),n=t.n(o),i=t(4720),l=n().create({timeout:1e4});l.interceptors.request.use((function(e){var s=(0,a.LP)();return s&&(e.headers.Authorization="Bearer__"+s),e}),(function(e){return Promise.reject(e)})),l.interceptors.response.use((function(e){return e.data}),(function(e){return e.response&&401===e.response.status&&((0,a.gy)(),(0,a.rs)(),location.reload()),(0,i.Message)({type:"error",message:e.message}),Promise.reject(e)}));var c=l,u={data:function(){return{passwordLock:!0,btnLoading:!1,passwordType:"password",param:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{switchPass:function(){this.passwordLock?this.passwordType="text":this.passwordType="password",this.passwordLock=!this.passwordLock},submitForm:function(){var e=this;this.$refs.loginRef.validate((function(s){var t;s?(e.btnLoading=!0,(t=e.param,c({url:"api/user/login",method:"post",data:t})).then((function(s){s.token?((0,a.o4)(s.token),(0,a.Lk)(s.role),e.$router.push("/"),e.$message({type:"success",message:s.message})):e.$message({type:"error",message:s.message||s})})).finally((function(){e.btnLoading=!1}))):e.$message.error("请输入用户名和密码")}))}}},p=(t(3804),(0,t(1900).Z)(u,r,[],!1,null,"37dfd6fc",null));p.options.__file="src/views/login/index.vue";var d=p.exports}}]);