(self.webpackChunkvue2_element_admin=self.webpackChunkvue2_element_admin||[]).push([[3866],{860:function(e,t,r){"use strict";r.d(t,{Z:function(){return U}});var n=r(3051),i=r(3),o=r(8154),a=r(5151),s=r(479),u=r(4735),c=r(8299),h=r(3726),p=r(5280),g=r(765),l=r(2892),f=[],v=function(){function e(e){this.name=e}return e.prototype.getCenter=function(){},e}(),d=function(e){function t(t,r,n){var i=e.call(this,t)||this;if(i.type="geoJSON",i.geometries=r,n)n=[n[0],n[1]];else{var o=i.getBoundingRect();n=[o.x+o.width/2,o.y+o.height/2]}return i._center=n,i}return(0,c.ZT)(t,e),t.prototype.getBoundingRect=function(){var e=this._rect;if(e)return e;for(var t=Number.MAX_VALUE,r=[t,t],n=[-t,-t],i=[],o=[],a=this.geometries,u=0;u<a.length;u++)if("polygon"===a[u].type){var c=a[u].exterior;h.zk(c,i,o),p.VV(r,r,i),p.Fp(n,n,o)}return 0===u&&(r[0]=r[1]=n[0]=n[1]=0),this._rect=new s.Z(r[0],r[1],n[0]-r[0],n[1]-r[1])},t.prototype.contain=function(e){var t=this.getBoundingRect(),r=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var n=0,i=r.length;n<i;n++)if("polygon"===r[n].type){var o=r[n].exterior,a=r[n].interiors;if(g.X(o,e[0],e[1])){for(var s=0;s<(a?a.length:0);s++)if(g.X(a[s],e[0],e[1]))continue e;return!0}}return!1},t.prototype.transformTo=function(e,t,r,n){var i=this.getBoundingRect(),o=i.width/i.height;r?n||(n=r/o):r=o*n;for(var a=new s.Z(e,t,r,n),u=i.calculateTransform(a),c=this.geometries,h=0;h<c.length;h++)if("polygon"===c[h].type){for(var g=c[h].exterior,l=c[h].interiors,f=0;f<g.length;f++)p.Ne(g[f],g[f],u);for(var v=0;v<(l?l.length:0);v++)for(f=0;f<l[v].length;f++)p.Ne(l[v][f],l[v][f],u)}(i=this._rect).copy(a),this._center=[i.x+i.width/2,i.y+i.height/2]},t.prototype.cloneShallow=function(e){null==e&&(e=this.name);var r=new t(e,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},t.prototype.getCenter=function(){return this._center},t.prototype.setCenter=function(e){this._center=e},t}(v),y=function(e){function t(t,r){var n=e.call(this,t)||this;return n.type="geoSVG",n._elOnlyForCalculate=r,n}return(0,c.ZT)(t,e),t.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this._calculateCenter()),e},t.prototype._calculateCenter=function(){for(var e=this._elOnlyForCalculate,t=e.getBoundingRect(),r=[t.x+t.width/2,t.y+t.height/2],n=l.yR(f),i=e;i&&!i.isGeoSVGGraphicRoot;)l.dC(n,i.getLocalTransform(),n),i=i.parent;return l.U_(n,n),p.Ne(r,r,n),r},t}(v),_=(0,n.kW)(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),m=function(){function e(e,t){this.type="geoSVG",this._usedGraphicMap=(0,n.kW)(),this._freedGraphics=[],this._mapName=e,this._parsedXML=(0,u.s)(t)}return e.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=function(e){var t=[],r=(0,n.kW)();return(0,n.S6)(e,(function(e){if(null==e.namedFrom){var n=new y(e.name,e.el);t.push(n),r.set(e.name,n)}})),{regions:t,regionsMap:r}}(e.named),r=t.regions,i=t.regionsMap;this._regions=r,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(e){var t,r;try{r=(t=e&&(0,i.hS)(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{}).root,(0,n.hu)(null!=r)}catch(e){throw new Error("Invalid svg format\n"+e.message)}var u=new o.Z;u.add(r),u.isGeoSVGGraphicRoot=!0;var c=t.width,h=t.height,p=t.viewBoxRect,g=this._boundingRect;if(!g){var l=void 0,f=void 0,v=void 0,d=void 0;if(null!=c?(l=0,v=c):p&&(l=p.x,v=p.width),null!=h?(f=0,d=h):p&&(f=p.y,d=p.height),null==l||null==f){var y=r.getBoundingRect();null==l&&(l=y.x,v=y.width),null==f&&(f=y.y,d=y.height)}g=this._boundingRect=new s.Z(l,f,v,d)}if(p){var m=(0,i.sd)(p,g);r.scaleX=r.scaleY=m.scale,r.x=m.x,r.y=m.y}u.setClipPath(new a.Z({shape:g.plain()}));var w=[];return(0,n.S6)(t.named,(function(e){var t;null!=_.get(e.svgNodeTagLower)&&(w.push(e),(t=e.el).silent=!1,t.isGroup&&t.traverse((function(e){e.silent=!1})))})),{root:u,boundingRect:g,named:w}},e.prototype.useGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,r),r)},e.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);r&&(t.removeKey(e),this._freedGraphics.push(r))},e}();function w(e,t,r){for(var n=[],i=t[0],o=t[1],a=0;a<e.length;a+=2){var s=e.charCodeAt(a)-64,u=e.charCodeAt(a+1)-64;s=s>>1^-(1&s),u=u>>1^-(1&u),i=s+=i,o=u+=o,n.push([s/r,u/r])}return n}for(var S=[126,25],R="南海诸岛",G=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],M=0;M<G.length;M++)for(var N=0;N<G[M].length;N++)G[M][N][0]/=10.5,G[M][N][1]/=-14,G[M][N][0]+=S[0],G[M][N][1]+=S[1];var C={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]},x={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},O=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],b=function(){function e(e,t,r){var i;this.type="geoJSON",this._parsedMap=(0,n.kW)(),this._mapName=e,this._specialAreas=r,this._geoJSON=(i=t,(0,n.HD)(i)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(i):new Function("return ("+i+");")():i)}return e.prototype.load=function(e,t){t=t||"name";var r=this._parsedMap.get(t);if(!r){var i=this._parseToRegions(t);r=this._parsedMap.set(t,{regions:i,boundingRect:J(i)})}var o=(0,n.kW)(),a=[];return(0,n.S6)(r.regions,(function(t){var r=t.name;e&&e.hasOwnProperty(r)&&(t=t.cloneShallow(r=e[r])),a.push(t),o.set(r,t)})),{regions:a,boundingRect:r.boundingRect||new s.Z(0,0,0,0),regionsMap:o}},e.prototype._parseToRegions=function(e){var t,r=this._mapName,i=this._geoJSON;try{t=i?function(e,t){return e=function(e){if(!e.UTF8Encoding)return e;var t=e,r=t.UTF8Scale;null==r&&(r=1024);for(var n=t.features,i=0;i<n.length;i++){var o=n[i].geometry;if("Polygon"===o.type)for(var a=o.coordinates,s=0;s<a.length;s++)a[s]=w(a[s],o.encodeOffsets[s],r);else if("MultiPolygon"===o.type)for(a=o.coordinates,s=0;s<a.length;s++)for(var u=a[s],c=0;c<u.length;c++)u[c]=w(u[c],o.encodeOffsets[s][c],r)}return t.UTF8Encoding=!1,t}(e),n.UI(n.hX(e.features,(function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0})),(function(e){var r=e.properties,i=e.geometry,o=[];if("Polygon"===i.type){var a=i.coordinates;o.push({type:"polygon",exterior:a[0],interiors:a.slice(1)})}"MultiPolygon"===i.type&&(a=i.coordinates,n.S6(a,(function(e){e[0]&&o.push({type:"polygon",exterior:e[0],interiors:e.slice(1)})})));var s=new d(r[t||"name"],o,r.cp);return s.properties=r,s}))}(i,e):[]}catch(e){throw new Error("Invalid geoJson format\n"+e.message)}return function(e,t){if("china"===e){for(var r=0;r<t.length;r++)if(t[r].name===R)return;t.push(new d(R,n.UI(G,(function(e){return{type:"polygon",exterior:e}})),S))}}(r,t),(0,n.S6)(t,(function(e){var t=e.name;!function(e,t){if("china"===e){var r=C[t.name];if(r){var n=t.getCenter();n[0]+=r[0]/10.5,n[1]+=-r[1]/14,t.setCenter(n)}}}(r,e),function(e,t){if("world"===e){var r=x[t.name];if(r){var n=[r[0],r[1]];t.setCenter(n)}}}(r,e),function(e,t){"china"===e&&"台湾"===t.name&&t.geometries.push({type:"polygon",exterior:O[0]})}(r,e);var n=this._specialAreas&&this._specialAreas[t];n&&e.transformTo(n.left,n.top,n.width,n.height)}),this),t},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}();function J(e){for(var t,r=0;r<e.length;r++){var n=e[r].getBoundingRect();(t=t||n.clone()).union(n)}return t}var T=(0,n.kW)(),U={registerMap:function(e,t,r){if(t.svg){var n=new m(e,t.svg);T.set(e,n)}else{var i=t.geoJson||t.geoJSON;i&&!t.features?r=t.specialAreas:i=t,n=new b(e,i,r),T.set(e,n)}},getGeoResource:function(e){return T.get(e)},getMapForUser:function(e){var t=T.get(e);return t&&"geoJSON"===t.type&&t.getMapForUser()},load:function(e,t,r){var n=T.get(e);if(n)return n.load(t,r)}}}}]);